<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Test</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
    </head>
    <body>
        <h1>Todos()</h1> 
        <div id = "header">
            <form id="textarea">
            <input id="text" type = "textarea"  placeholder="Enter your todo here">
            <button id="btn" type="button">Submit</button>
            </form>
        </div>
        <div id= "main">
            <ul id="task"></ul>
        </div>
    <script>
            // var passengers = [{ name: "Jane Doloop", paid: true },
            //                 { name: "Dr. Evel", paid: true },
            //                 { name: "Sue Property", paid: false },
            //                 { name: "John Funcall", paid: true }];
            // function printPassenger(passengers) {
            //     for(var i=0; i<passengers.length; i++){
            //         if(passengers.paid===true){
            //             console.log("paid");
            //         }
            //         else{
            //             console.log(passengers.name+""+"not paid");
            //         }
            //     }
            // }
            // printPassenger();
            //     var message =  passengers.name;
            //     if(passengers.paid===true) {
            //         message = message+ "has paid";
            //     }
            //     else {
            //         message=message+"hasn't paid";
            //     }
            //     console.log(message);
            //     return false;
            // }   
            
            // printPassenger(passengers);
            // fun("hello");
            // function boo(aFunction) {
            //     aFunction("boo");
            // }
            // boo(fun);
            // console.log(fun);
            // fun(boo);
            // var moreFun = fun;
            // moreFun("hello again");
            function submitButtonClick() { 
    //creating elements//
    let listItemElement = document.createElement("li");
    createCheckboxAndAppendToListItem(listItemElement);
    let textLabel = document.createElement("label");
    let todoItemText = document.getElementById("text").value;
    textLabel.innerHTML = todoItemText;
    textLabel.classList.add("taskLabel");
    let editBtnRefElement = document.createElement("button");
    editBtnRefElement.innerHTML = "edit";
    editBtnRefElement.classList.add("editBtn");
    // let doneBtnRefElement = document.createElement("button");
    // doneBtnRefElement.innerHTML = "Done";
    // doneBtnRefElement.classList.add("doneBtn");
    let dltBtnRefElement = document.createElement("button");
    dltBtnRefElement.innerHTML = "delete";
    dltBtnRefElement.classList.add("dltBtn");
    //append child method allows you to add node to the end of the list of child nodes of a specified parent node//
    listItemElement.appendChild(textLabel);
    listItemElement.appendChild(editBtnRefElement);
    // listItemElement.appendChild(doneBtnRefElement);
    listItemElement.appendChild(dltBtnRefElement);
    addActionListeners(listItemElement, textLabel, editBtnRefElement, dltBtnRefElement);
    //prepend method puts element at first index and append puts element at last index//
    (document.getElementById("task")).prepend(listItemElement);
     //to clear the input text once user submit the button//
     document.getElementById("text").value="";
}
//create checkbox element and appends to newly created listitem element
function createCheckboxAndAppendToListItem(newlyCreatedListItemElement) {
    let checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.classList.add("checkbox")
    newlyCreatedListItemElement.appendChild(checkbox);
}

var submitBtnRef = document.getElementById("btn");
submitBtnRef.onclick = submitButtonClick;

//handling edit button for task

function editText(textLabel,editBtnRefElement) {
    if(textLabel.contentEditable = true){
        // let doneBtnRefElement = document.createElement("button");
        editBtnRefElement.innerHTML = "Done";
        // doneBtnRefElement.classList.add("doneBtn");
        // editBtnRefElement.append(doneBtnRefElement);
        // doneBtnRefElement.style.visibility = "visible";
    };
    
    // textLabel.style:hover = ;
    textLabel.style.cursor = "auto";
    textLabel.style.color = "#00FFFF";
    textLabel.style.textOverflow = "clip";
}

//handling done button for task

// function doneText(listItemElement, oldTextLabel, editBtnRefElement, dltBtnRefElement, doneBtnRefElement) {
//     let newTextLabel = document.createElement("label");
//     newTextLabel.classList.add("taskLabel");
//     newTextLabel.innerHTML = oldTextLabel.innerHTML;
//     oldTextLabel.replaceWith(newTextLabel);
//     addActionListeners(listItemElement, newTextLabel, editBtnRefElement, doneBtnRefElement, dltBtnRefElement);
//     // textLabel.contentEditable = false;
// }

function addActionListeners(listItemElement, newTextLabel, editBtnRefElement, dltBtnRefElement) {
    editBtnRefElement.addEventListener("click", function(){ editText(newTextLabel,editBtnRefElement); });
    // doneBtnRefElement.addEventListener("click", function(){doneText(listItemElement, newTextLabel, editBtnRefElement, dltBtnRefElement, doneBtnRefElement)});
    dltBtnRefElement.addEventListener("click", function(){dltText(listItemElement)});
}

// handling delete button for task
// remove method allows you to remove the element

function dltText(listItemElement) {
    listItemElement.remove();
}
        </script>
    </body>
</html>